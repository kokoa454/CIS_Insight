CIS諸国ニュース対訳Webアプリ「CIS Insight」 要件定義書

1. サービス概要
　CIS諸国（カザフスタン、ウズベキスタン、ロシア等）の現地ニュースを収集し、AI（Gemini/DeepL）を用いて日本語対訳付きで提供するニュースキュレーションプラットフォーム。

2. ターゲットユーザー
・CIS諸国の情勢を一次情報に近い形で知りたいビジネスパーソン・研究者
・ロシア語を学習中で、生きた教材を求めている学習者
・日本の主要メディアでは報じられない地域の詳細な動向を知りたい人

3. 機能要件
3.1 ニュース収集・管理機能
・RSS/Telegram収集: News_RSSテーブルに登録されたソースから定期的に情報を取得する。
・重複排除: news_linkを一意のキー（Unique Index）とし、既にDBに存在する記事はスキップする。
・国・トピック分類: 取得した記事に対し、記事タイトル等に基づき、Geminiを用いて、news_countryおよびnews_topicを割り当てる。

3.2 翻訳・要約機能
・多言語保持: 原文（ロシア語等）を news_content_ru に、翻訳後を news_content_ja に個別に保存する。
・オンデマンド翻訳: 無料枠節約のため、一覧表示時はタイトルのみ翻訳し、ユーザーが詳細を要求した際に本文を翻訳・キャッシュする。

3.3 ユーザー機能
・アカウント管理: ユーザー登録・編集・退会、ログイン・ログアウト、プロフィール（アイコン）設定。
・パーソナライズ: ユーザーごとに「好みの国（user_preferred_country）」や「好みのトピック（user_preferred_topic）」を保存し、表示順序を最適化する。
・既読管理: ユーザーが読んだ記事数（user_news_count）のカウント。

3.4 管理者機能
・権限管理: user_adminフラグを持つユーザーのみがアクセス可能な管理画面。
・ソース管理: News_RSSテーブルへの新規配信元の追加・編集・削除。

4. 非機能要件（運用・技術スタック）
4.1 インフラ・技術構成
・サーバー: OCI Compute (Always Free AMD Instance / Memory 1GB)
・言語: Python 3.10+
・データベース: SQLite 3 (ファイルベースで1GBメモリに最適化)
・UIフレームワーク: Streamlit (Pythonのみでフロントエンドを構築)
・AI API: Gemini 1.5 Flash (タイトル翻訳・分類), DeepL API Free (本文翻訳)

4.2 データベース設計（インデックス戦略）
・高速化: news_countryにインデックスを貼り、国別フィルタリングを高速化する。
・整合性: news_linkおよびrss_linkにユニークインデックスを貼り、重複データを防止する。

4.3 ディレクトリ構造
cis_insight/
├── .env                # APIキーやDBパス等の機密情報（ルートがおすすめ）
├── requirements.txt    # 必要なライブラリ
├── app.py              # UI (Streamlit)
├── data/
│   └── cis_insight.db  # データベース
├── config/
│   └── config.py       # .envを読み込んで各モジュールに渡す担当
└── modules/
    ├── database.py     # DB接続・テーブル作成
    ├── crawler.py      # RSS取得・パース
    └── ai.py           # 翻訳・分類ロジック

5. 画面設計イメージ
・ログイン画面: ユーザー名とパスワードによる認証。
・メインフィード: 好みの国のニュースをタイムライン形式で表示。
・記事詳細画面: 左右2カラムレイアウト（左：原文、右：日本語訳）。
・設定画面: 好みの国（カザフスタン、ウズベキスタン等）やトピック（IT、経済等）の選択。

6. 今後の拡張計画
・Telegram Bot連携: 特定の重要ニュースをプッシュ通知。
・コミュニティ機能: 記事に対するユーザーコメントやブックマーク機能。